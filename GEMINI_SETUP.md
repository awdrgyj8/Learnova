# Gemini AI 整合設置指南

## 🤖 功能概述

本平台已整合 Google Gemini AI，可以根據您提供的學習內容自動生成選擇題。AI 會分析內容並創建相關的題目，包括：

- 單選題和多選題
- 4個選項（包含合理的干擾項）
- 自動設置正確答案
- 可自定義生成題目數量（1-50題）
- 根據內容難度調整題目複雜度

## 🔧 設置步驟

### 1. 獲取 Gemini API 密鑰

1. 前往 [Google AI Studio](https://makersuite.google.com/app/apikey)
2. 登入您的 Google 帳戶
3. 點擊 "Create API Key"
4. 選擇一個 Google Cloud 項目（或創建新項目）
5. 複製生成的 API 密鑰

### 2. 配置環境變量

在 `.env.local` 文件中設置您的 API 密鑰：

```env
# Gemini AI Configuration
GEMINI_API_KEY=your_actual_gemini_api_key_here
```

**重要提醒**：
- 請將 `your_actual_gemini_api_key_here` 替換為您的實際 API 密鑰
- 不要將 API 密鑰提交到版本控制系統
- API 密鑰僅在後端使用，不會暴露給前端

### 3. 重啟開發服務器

配置完成後，重啟開發服務器以載入新的環境變量：

```bash
bun dev
```

## 🎯 使用方法

### 在創建考試頁面使用 AI 生成

1. 進入 "創建新考試" 頁面
2. 填寫考試基本信息
3. 在題目設計區域，點擊 "AI 生成" 按鈕
4. 在彈出的 AI 生成器中輸入學習內容
5. 設定要生成的題目數量（1-50題）
6. 點擊 "生成題目" 等待 AI 處理
7. 生成的題目會自動添加到您的考試中
8. 您可以進一步編輯或調整生成的題目

### 輸入內容建議

為了獲得最佳的題目生成效果，建議輸入：

**✅ 好的輸入範例**：
```
光合作用是植物利用陽光、二氧化碳和水製造葡萄糖的過程。
這個過程發生在葉綠體中，需要葉綠素的參與。
光合作用的化學方程式為：6CO2 + 6H2O + 光能 → C6H12O6 + 6O2
光合作用分為光反應和暗反應兩個階段...
```

**❌ 避免的輸入**：
- 過於簡短的內容（少於50字）
- 純粹的關鍵詞列表
- 沒有邏輯結構的片段文字

## 🔒 安全性

### API 密鑰保護

- ✅ API 密鑰僅存儲在服務器端環境變量中
- ✅ 前端無法訪問 API 密鑰
- ✅ 所有 AI 請求都通過後端 API 路由處理
- ✅ 使用 HTTPS 加密傳輸

### 數據隱私

- 輸入的內容會發送到 Google Gemini API 進行處理
- 請避免輸入敏感或機密信息
- 生成的題目會存儲在您的 Appwrite 資料庫中

## 🛠️ 技術實現

### API 端點

- **路徑**: `/api/generate-questions`
- **方法**: POST
- **參數**:
  - `content`: 學習內容文本
  - `questionCount`: 生成題目數量（1-50題，可自定義）
  - `difficulty`: 難度等級（easy/medium/hard）

### 回應格式

```json
{
  "success": true,
  "questions": [
    {
      "question": "題目內容",
      "type": "single",
      "options": ["選項A", "選項B", "選項C", "選項D"],
      "correctAnswers": ["0"]
    }
  ]
}
```

## 🔍 故障排除

### 常見問題

**Q: 點擊生成題目後沒有反應？**
A: 檢查：
1. API 密鑰是否正確設置
2. 網絡連接是否正常
3. 瀏覽器控制台是否有錯誤信息

**Q: 生成的題目格式不正確？**
A: 這可能是 AI 回應格式問題，系統會自動重試。如果持續出現，請檢查輸入內容是否清晰完整。

**Q: API 配額用完了？**
A: Gemini API 有使用限制，請檢查您的 Google Cloud 配額設置。

### 錯誤代碼

- `400`: 輸入內容為空或格式錯誤
- `500`: API 密鑰錯誤或服務器內部錯誤
- `429`: API 請求頻率過高

## 📈 最佳實踐

1. **內容準備**: 提供結構化、完整的學習內容
2. **批量生成**: 一次生成多個題目比多次單個生成更高效
3. **人工審核**: 生成後請檢查題目的準確性和適用性
4. **混合使用**: 結合 AI 生成和手動創建，獲得最佳效果

## 🆕 未來功能

計劃中的增強功能：
- 支援更多題型（填空題、問答題）
- 難度等級自動調整
- 批量內容處理
- 題目品質評分
- 多語言支援

---

如有任何問題或建議，請聯繫開發團隊。